"""
Auto-generated semantic module for zipingzhenquan
Generated at: 2025-12-05T13:30:19.465643
Version: 1.0.0

对照 Requirements 6.4 - 带 @SemanticRegistry.register 装饰器的 Python 模块
"""

from backend.semantics.core.base import SemanticEntry, SemanticRegistry, NarrativeSnippetExtended
from backend.core.contracts import (
    SnippetRole,
    SourceMetadata,
    ConfigRelation,
    EvidenceChainEntry,
    RelationType,
    EffectDirection,
    ConfidenceLevel,
)


@SemanticRegistry.register(
    semantic_id="zpzq_v1.0.0_同一生克_不同先后_格局高下由次序决定_001",
    book_id="zipingzhenquan",
    engine_id="bazi"
)
class 同一生克不同先后格局高下由次序决定(SemanticEntry):
    """
    - **原文（source_text）**：
  二十、论生克先后分吉凶。
  月令用神，配以四柱，固有每字之生克以分吉凶，然有同此生克，而先后之间，遂分吉凶者，尤谈命之奥也。

  如正官同是财伤并...
    """
    
    original_text: str = """- **原文（source_text）**：
  二十、论生克先后分吉凶。
  月令用神，配以四柱，固有每字之生克以分吉凶，然有同此生克，而先后之间，遂分吉凶者，尤谈命之奥也。

  如正官同是财伤并透，而先后有殊。假如甲用酉官，丁先戊后，后则以财为解伤，即不能贵，后运必有结局。若戊先而丁后时，则为官遇财生，而后因伤破，即使上运稍顺，终无结局，子嗣亦难矣。

  印格同是贪财坏印，而先后有殊。如甲用子印，己先癸后，即使不富，稍顺晚境；若癸先而己在时，晚景亦悴矣。

  食神同是财枭并透，而先后有殊。如壬用甲食，庚先丙后，晚运必亨，格亦富而望贵。若丙先而庚在时，晚运必淡，富贵两空矣。

  七煞同是财食并透，而先后大殊。如己生卯月，癸先辛后，则为财以助用，而后煞用食制，不失大贵。若辛先而癸在时，则煞逢食制，而财转食党煞，非特不贵，后运萧索，兼难永寿矣。

  他如此类，可以例推。然犹吉凶易者也，至丙生甲寅月，年癸时戊，官能生印，而不怕戊合；戊能泄身为秀，而不得越甲以合癸，大贵之格也。假使年月戊癸，而时甲，或年甲而月癸、时戊，则戊无所隔，而合全癸，格大破矣。

  丙生辛酉，年癸时己，伤因财间，伤之无力，间有小贵。假如癸己并产，而中无辛隔，格尽破矣。

  辛生申月，年壬月戊，时上丙官，不愁隔戊之壬，格亦许贵。假使年丙月壬而时戊，或年戊月丙而时壬，则壬能克丙，无望其贵矣。

  如此之类，不可胜数，其中吉凶似难猝喻。然细思其故，理甚显然，特难为浅者道耳。

- 原注（原文注解）：
  　　本章说明：在同样的生克组合下，**各字出现的先后次序**会让格局高下、吉凶、运程走向发生巨大的差别，这是谈命中的一大奥妙。
  - 开篇先概括：月令用神配四柱，本来每一个生克关系都能分吉凶；但更进一步，同样是“财伤并透”“财枭并透”，由于谁先谁后不同，结果也会不同。
  - 然后通过四类典型格局示范：
    1) 正官格：同是财伤并透，甲用酉官一局中，丁先戊后与戊先丁后，贵贱天壤之别；
    2) 印格：同是贪财坏印，甲用子印时，己先癸后与癸先己后，晚境大不相同；
    3) 食神格：同是财枭并透，壬用甲食时，庚先丙后与丙先庚后，决定晚运是亨通还是空淡；
    4) 七煞格：同是财食并透，己生卯月时癸先辛后与辛先癸后，决定是“财助用、食制煞”的大贵，还是“财转食党煞”的萧索甚至短寿。
  - 中后段又举几例，更加突出“隔与不隔、先与后”的微妙：
    - 丙生甲寅，年癸时戊，官能生印，而戊不能越甲合癸，格成大贵；若改为年月戊癸时甲，或年甲月癸时戊，则戊无所隔，合尽癸水，印被尽合，格大破；
    - 丙生辛酉，年癸时己，伤因财间，伤之无力，尚有小贵；若癸己并生而中无辛隔，则财伤直接相并，格尽破；
    - 辛生申月，年壬月戊，时上丙官，不愁隔戊之壬，格尚许贵；若年份、月令次序颠倒，使壬能直接克丙，则官被伤克，无望其贵。
  - 结语指出：
    - 这类例子不胜枚举，表面看似难以一言道尽；
    - 但细思则原理甚显：关键在“谁先生、谁后克、谁隔开谁”，只是难以向浅尝者三言两语说明。

- 分字分词释义：
  - 生克先后：指某一局中各干支出现的顺序，以及生克发生的前后次序。
  - 财伤并透：财星与伤官同时透出天干。
  - 贪财坏印：财星过重克印或泄印，使印格受损。
  - 财枭并透：财星与偏印同时透出干头。
  - 财食并透：财星与食神同时透出。
  - 结局：事业、婚姻、子嗣等方面的最终走向。
  - 亨：通达顺利之意。
  - 萧索：气数衰败、境遇冷落。
  - 猝喻：仓促之间难以说清。

- **规范化释义（primary_lang_explained）**：
  这一章在前人常说“看生克以分吉凶”的基础上，再推进一步：**同样的生克组合，其发生的先后顺序不同，格局的成败高下也会不同。**

  作者首先以正官格为例：
  - 甲用酉官，若丁（伤）先透、戊（财）后透，则表示先有伤官来克官，再有财来解伤；虽难登极品之贵，但后运多有结局，不致完全败坏；
  - 若戊先丁后，则先是财生官，官得其生，格局本可美；但随后伤官出来克官，犹如先成后破，即便前期有顺境，终局多不善，子嗣亦难保。

  印格的例子中：
  - 甲用子印，若己（财）先、癸（印）后，则财早先坏印，印后出现仍可挽回一部分气数，晚景尚可稍顺；
  - 若癸先己后，则先有印可用，后被财破，属于“成中有败、败在后程”，晚景多见衰悴。

  食格中：
  - 壬用甲食，庚（枭）先、丙（财）后，则先用枭印约束食、护身，再用财生助，使格局渐成；晚运多亨通；
  - 若丙先庚后，则财先泄食、带动局势，随后枭再出破食，一前一后使得“食枭并见”的破格效应集中在后程，晚运多淡。

  七煞格中：
  - 己生卯月，癸先辛后，则先财助用，再食制煞，不失大贵；
  - 若辛先癸后，则先有食制煞，后财又助煞，使财转为食之党，格局由制煞转为助煞，后运不止不贵，甚至关系寿数。

  后面几个例子再强调“隔与不隔”的妙用：
  - 丙生甲寅，年癸时戊的结构中，甲寅可以“隔开”戊与癸，使戊不能直接合尽癸，印仍有余力，格局大贵；
  - 若把年月日时的顺序换成“年月戊癸、时甲”之类，则戊无所隔，一步到位合全癸，印格顿失，原格大破；
  - 丙生辛酉、年癸时己，辛在中间隔开癸与己，使“财枭并透”的冲突被削弱，还可有小贵；一旦癸己并产而中无辛隔，则财枭直冲，格尽破；
  - 辛生申月，年壬月戊，时上丙官，本局“戊隔壬克丙”，格犹可贵；若改成年丙月壬时戊或年戊月丙时壬，则壬直接克丙，官星不保。

  作者最后说：“如此之类，不可胜数，其中吉凶似难猝喻”，但强调细想则理极明：“特难为浅者道耳”。意思是：
  - 生克先后之妙，并非玄虚，而是精细到“谁先谁后、谁隔谁”的秩序问题；
 - **完整对等诠释（secondary_lang_full）**：  
  When the same set of generating and controlling relationships unfolds in different orders, it can lead to very different life stories: who appears first, who comes later, and whether a separating stem stands between key actors determines whether a pattern is "formed then broken" or "broken then formed". In practice it is this sequence logic, not static labels on individual stars, that governs whether a structure ends in nobility or decline.

  - 只是这种顺序逻辑，需要较深的整体观与耐心推演，难以用几个口号说清。

- 详细解说：
  - 本章进一步提醒我们：
    - 八字不是静态的“字面集合”，而是一个按一定顺序展开的动力系统；
    - 生克关系的先后，就像故事中“先发生什么、再发生什么”，顺序不同，结局自然不同。
  - 从用神角度看：
    - 正用若在前，后续受伤，多属“成中有败”；
    - 正用若在后，前面受破，尚有挽回余地，多见“败中有成”；
    - 有的格局全赖次序中某一“隔字”来维系，一旦顺序改变，隔断消失，格局即刻失守。
  - 与前文“因成得败、因败得成”的概念相呼应：
    - 成败的互转，往往发生在这些先后顺序与隔断位置上。

- 核心要点：
  - 读八字不可只看“现有配置”，还要看：
    1) 哪个字在前，哪个在后？
    2) 谁先生、谁后克？
    3) 是否有中间之字起到“隔断”作用？
  - 同样的“财伤并透、财枭并透、财食并透”，先后顺序不同，吉凶判定可截然相反。
  - 真正的高格，往往在“先成后护”或“先护后成”的顺序安排上见妙处。

- 应用推演：
  1) 在确定格局之后，按时间或结构顺序标出各关键字的“先后位”：年、月、日、时与干支的前后；
  2) 针对财伤、财枭、财食、官伤、印财等常见组合，检查其先后顺序是否导致“先成后破”或“先破后成”；
  3) 找出那些起“隔断”作用的字，评估若岁运改变其顺序或强度时，对格局的影响；
  4) 在运势解读中，将“先成后败”“先败后成”的可能节点标记出来，提供时间上的风险与机会提示。

- 反例与边界：
  - 只看“格局名称”而不看生克顺序，导致对一生命运高低起伏判断模糊；
  - 只从年柱或日柱孤立看吉凶，不看全局中其他干支对其的先后影响；
  - 把本章例子当成死板格局记忆，而不学习“顺序—隔断—成败”的底层逻辑。

- 小例（示意）：
  - 一命官格中财先伤后，年轻运程多起伏，但中晚年逢解伤之运仍有“收尾”机会；
  - 另一命同为财伤并透，却是伤先财后，早年虽有一时光彩，晚运多见破败、子嗣有损，就是典型“同此生克而先后吉凶不同”的案例。

- 校勘与字词辨析：
  - 原文“格亦富而望贵”“非特不贵，后运萧索，兼难永寿矣”等句，多本字句相同，本精校仅在断句处略作整理；
  - “理甚显然，特难为浅者道耳”一语，点出本章精义：理虽不难，难在细致体会与综合推演，并非可以靠口诀速成。


- **叙事素材（narrative_snippets）**：
  - `[ns_zpzy_351]` `[trigger: 第21章要点]` `[factor_trigger: chapter=21 AND hexin_lunshu]` `[role: 主干]` 本章核心论述。 → 《子平真诠》#中卷第21章
  - `[ns_zpzy_352]` `[trigger: 先后之序]` `[factor_trigger: (xian_sheng_hou_ke AND result=ji) OR (xian_ke_hou_sheng AND result=xiong)]` `[role: 主干]` 先生后克吉，先克后生凶。 → 《子平真诠》#中卷
  - `[ns_zpzy_353]` `[trigger: 食伤入库]` `[factor_trigger: shishang_ruku AND zixi_chihuan]` `[role: 主干]` 食伤入库，子息迟缓。 → 《子平真诠》#中卷
  - `[ns_zpzy_354]` `[trigger: 比劫入库]` `[factor_trigger: bijie_ruku AND shouzu_wuyuan]` `[role: 主干]` 比劫入库，手足无缘。 → 《子平真诠》#中卷
  - `[ns_zpzy_355]` `[trigger: 食入库中]` `[factor_trigger: shi_ru_kuzhong AND zixi_wan_de]` `[role: 主干]` 食入库中，子息晚得。 → 《子平真诠》#中卷
  - `[ns_zpzy_356]` `[trigger: 吉神太旺]` `[factor_trigger: jishen_tai_wang AND fan_wei_bumei]` `[role: 主干]` 吉神太旺，反为不美。 → 《子平真诠》#中卷
  - `[ns_zpzy_357]` `[trigger: 凶神逢制]` `[factor_trigger: xiongshen_feng_zhi AND fan_neng_cheng_ge]` `[role: 主干]` 凶神逢制，反能成格。 → 《子平真诠》#中卷
  - `[ns_zpzy_358]` `[trigger: 相神得用]` `[factor_trigger: xiangshen_deyong=true AND fuge_yougong]` `[role: 主干]` 相神得用，辅格有功。 → 《子平真诠》#中卷
  - `[ns_zpzy_359]` `[trigger: 时柱归宿]` `[factor_trigger: shizhu_guisu AND zixi_zhigong]` `[role: 主干]` 时柱归宿，子息之宫。 → 《子平真诠》#中卷"""
    normalized_text_zh: str = """"""
    subject: str = "同一生克，不同先后：格局高下由次序决定"
    factor_refs: list = []
    
    # 叙事素材（包含 trigger_human）
    narrative_snippets: list = [

    ]
    
    # L2.5 因子关系
    related_semantics: list = [

    ]
    
    # L2.5 证据链
    evidence_refs: list = [

    ]
    
    metadata: SourceMetadata = SourceMetadata(
        book_id="zipingzhenquan",
        chapter="",
        l1_anchor="zpzq_v1.0.0_同一生克_不同先后_格局高下由次序决定_001_L1",
    )
    version: str = "1.0.0"
