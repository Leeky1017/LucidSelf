"""
Auto-generated semantic module for sanming
Generated at: 2025-12-05T13:30:19.101432
Version: 1.0.0

对照 Requirements 6.4 - 带 @SemanticRegistry.register 装饰器的 Python 模块
"""

from backend.semantics.core.base import SemanticEntry, SemanticRegistry, NarrativeSnippetExtended
from backend.core.contracts import (
    SnippetRole,
    SourceMetadata,
    ConfigRelation,
    EvidenceChainEntry,
    RelationType,
    EffectDirection,
    ConfidenceLevel,
)


@SemanticRegistry.register(
    semantic_id="smth_v1.0.0_三奇顺逆_得体与得地_001",
    book_id="sanming",
    engine_id="bazi"
)
class 三奇顺逆得体与得地(SemanticEntry):
    """
    - **原文（source_text）**：
  《三车一览》以甲为阳木之魁，戊为阳土之君，庚为阳金之精，地有此三物为奇，谓之地之奇；其说太凿。《太乙经》以辛壬癸为水奇，谓之人间三奇，其说无据，但辛壬...
    """
    
    original_text: str = """- **原文（source_text）**：
  《三车一览》以甲为阳木之魁，戊为阳土之君，庚为阳金之精，地有此三物为奇，谓之地之奇；其说太凿。《太乙经》以辛壬癸为水奇，谓之人间三奇，其说无据，但辛壬癸天干连珠，谓之三台，亦为难得。《紫虚局》又有四奇之说；夫奇，奇数也，四则偶矣，谓之奇，可乎？三奇要顺布，不欲倒乱，如乙丙丁、甲戊庚，天干年月日时顺布为吉。《广录》又以乙人丙月丁时，是乙生丙丁，秀气下降，主平常；若乙时丙日丁年，是秀气上达，反为贵，似又不论顺逆。甲戊庚却以顺者为贵，逆者福慢，乱者不寿，气清则贵，气浊则富。经曰：「五行各有奇仪，须分逆顺。」若日月倒乱，得顺三奇，亦不谓倒命。有三奇，要得体得地，不欲失时：如乙丙丁夜生，甲戊庚昼生，得体；乙丙丁柱有亥，则三光有所依附；甲戊庚柱有申，则三物有所凭籍；或乙丙丁得丑寅卯未午巳，甲戊庚得丑未金，皆为得地。三奇再遇三合，如乙丙丁得金水局，甲戊庚得水火局，尤佳。

- **分字分词释义**：
  - **顺布 / 倒乱**：三奇按天干顺序依次分布于年、月、日、时为顺布，否则为倒乱。
  - **得体 / 得地 / 得时**：体指昼夜与阴阳是否相称，地指所据地支是否相宜，时指出现时机是否恰当。
  - **气清则贵、气浊则富**：三奇气机纯清者主贵，混杂略浊者多偏富。

- **规范化释义（primary_lang_explained）**：
  作者在罗列各家三奇说法后，归纳出取用要点：
  - 以顺布为上：乙丙丁或甲戊庚按年、月、日、时顺序排列，为最理想的三奇；
  - 逆布或乱布虽非全废，但贵气衰减，甚至只主富而不贵；
  - 还需「得体」：乙丙丁宜夜生、甲戊庚宜昼生，阴阳相称；
  - 亦须「得地」：乙丙丁得亥、丑寅卯未午巳等依托，甲戊庚得申、丑未等位置，方有落脚之处；
  - 与三合局相遇更佳，如乙丙丁得金水局，甲戊庚得水火局，使奇气与大局流行方向一致。

- **核心要点**：
  - 三奇不是「有则灵，无则不灵」的标签，而是一个多条件叠加的结构：顺逆、昼夜、地支、合局皆要合度。
  - 工程化时，可为三奇设计一套评分机制：顺布、得体、得地、遇三合分别加权，最终输出一个「三奇指数」，而非简单布尔值。

- **详细解说**：
  1) 在命局干支中检查是否存在乙丙丁或甲戊庚三干，并根据日主阴阳与原局结构确定适用的三奇组合；
  2) 按年、月、日、时顺序检查这三干是否形成「顺布」「逆布」或「乱布」，并为命局打上对应的顺逆标签；
  3) 结合出生时段判断是否「得体」：乙丙丁偏宜夜生、甲戊庚偏宜昼生，同时考察日主阴阳与实际昼夜是否协调；
  4) 检查地支是否「得地」：乙丙丁是否有亥、丑寅卯未午巳等依托，甲戊庚是否有申、丑未金等落脚之处，并记录与三合局是否相顺；
  5) 将顺逆、得体、得地、遇三合等条件综合加权，计算一个「三奇指数」，供后续在人才潜质、发展路径等任务中调用，而非直接作为绝对贵贱判断依据。

- 反例与边界：
  - 不宜将「凡见乙丙丁/甲戊庚即算三奇」视为金科玉律，若不成组或排列混乱，只是普通配置，不能冒称格局；
  - 不宜将顺布三奇看作「一生命运完全决定因子」，实际仍需结合格局、用神、运势与现实资源，否则会夸大其影响；
  - 在现代环境，不必将古文中「贫穷下贱」等形容原样迁移，应转译为机会受限、资源匹配度不足等可验证的社会学结果；
  - 对于只在大运、流年阶段性形成的三奇，不宜等同于原局三奇，其作用更多是阶段性提升，而非底层格局根基。

- 小例（示意）：
  - 某命局年、月、日、时干依次为乙、丙、丁，出生于夜间且局中见亥水、巳火等形成良好依托与三合，系统可判为「顺布 + 得体 + 得地」的高分三奇，在人才画像中突出其综合学习能力与跨界创造力；
  - 另一命局仅在月干见丙、时干见丁，中间断裂且落在重煞之地，系统则只给予中等三奇指数，并提示其「个别领域有奇发潜力，但整体资源与环境未必能完整承接」，不宜过度期待。"""
    normalized_text_zh: str = """"""
    subject: str = "三奇顺逆、得体与得地"
    factor_refs: list = ['new_candidate', 'new_candidate', 'new_candidate', 'engine_id', 'bazi_state_factor_122', 'bazi_semantic', 'bazi_state_factor_123', 'bazi_semantic', 'bazi_condition_factor_35', 'bazi_semantic', 'bazi_condition_factor_36', 'bazi_semantic', 'bazi_relation_factor_56', 'bazi_semantic']
    
    # 叙事素材（包含 trigger_human）
    narrative_snippets: list = [

    ]
    
    # L2.5 因子关系
    related_semantics: list = [

    ]
    
    # L2.5 证据链
    evidence_refs: list = [

    ]
    
    metadata: SourceMetadata = SourceMetadata(
        book_id="sanming",
        chapter="",
        l1_anchor="smth_v1.0.0_三奇顺逆_得体与得地_001_L1",
    )
    version: str = "1.0.0"
