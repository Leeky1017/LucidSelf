"""
Auto-generated semantic module for sanming
Generated at: 2025-12-05T13:30:19.042729
Version: 1.0.0

对照 Requirements 6.4 - 带 @SemanticRegistry.register 装饰器的 Python 模块
"""

from backend.semantics.core.base import SemanticEntry, SemanticRegistry, NarrativeSnippetExtended
from backend.core.contracts import (
    SnippetRole,
    SourceMetadata,
    ConfigRelation,
    EvidenceChainEntry,
    RelationType,
    EffectDirection,
    ConfidenceLevel,
)


@SemanticRegistry.register(
    semantic_id="smth_v1.0.0_人元三才与月令分配_001",
    book_id="sanming",
    engine_id="bazi"
)
class 人元三才与月令分配(SemanticEntry):
    """
    - **原文（source_text）**：
  夫一气浑沦，形质未离，孰为阴阳？太始既肇，裂一为三，倏息乃分：天得之而轻清为阳，地得之而重浊为阴，人位乎天地之中，禀阳阴冲和之气。故此轻清者为十干，主...
    """
    
    original_text: str = """- **原文（source_text）**：
  夫一气浑沦，形质未离，孰为阴阳？太始既肇，裂一为三，倏息乃分：天得之而轻清为阳，地得之而重浊为阴，人位乎天地之中，禀阳阴冲和之气。故此轻清者为十干，主禄，谓之天元；重浊者为十二支，主身，谓之地元。天地各正其位，成才于两间者，乃所谓人也。故支中所藏者主命，谓之人元，名为司事之神，以命术言之为月令。若正月建寅，寅中有艮土用事五日，丙火长生五日，甲木二十日；二月建卯，卯中有甲木用事七日，乙木二十三日；三月建辰，辰中有乙木用事七日，壬水墓库五日，戊土一十八日；四月建巳，巳中有戊土七日，庚金长生五日，丙火一十八日；五月建午，午中丙火用事七日，丁火二十三日；六月建未，未中有丁火用事七日，甲木墓库五日，己土一十八日；七月建申，申中有坤土用事五日，壬水长生五日，庚金二十日；八月建酉，酉中有庚金用事七日，辛金二十三日；九月建戌，戌中有辛金用事七日，丙火墓库五日，戊土一十八日；十月建亥，亥中有戊土五日，甲木长生五日，壬水用事二十日；十一月建子，子中有壬水用事七日，癸水二十三日；十二月建丑，丑中有癸水用事七日，庚金墓库五日，己土一十八日。此十二支按十二月，各藏五行为人元，以配四时，则春暖秋凉、冬寒夏热，如环无端，终而复始，岁功毕而成一年。

- **分字分词释义**：
  - **天元 / 地元 / 人元**：天元指十干之轻清之气，主禄与职分；地元指十二支之重浊之气，主身与形器；人元指藏于地支中的司事之神，以月令为代表。
  - **司事之神**：在人命中主具体事务、职司与时令之用，等同命术中的月令用事者。
  - **用事日数**：每月中不同五行在支内轮流主事的天数分配（5 日、7 日、18 日、20 日、23 日等），以刻画气机轮班。
  - **如环无端，终而复始**：四时寒温循环往复，映照人元轮值的周期性。

- **规范化释义（primary_lang_explained）**：
  本段先从宇宙生成说起：一气浑沦，分裂为天、地、人三才，天得轻清之气为阳，地得重浊之气为阴，人处其中，禀阴阳冲和之气。于是，轻清之气形成十天干，主人的禄位与职分，称为天元；重浊之气形成十二地支，主人的形体与环境，称为地元；藏在地支中的五行之神，便是人元，主管具体事务，在命术上体现在月令之中。

  接下来作者列出十二月的人元分配：每个建月的地支内部，都有若干天干轮流「用事」若干天，如正月寅中先是艮土用事五日，再由丙火长生五日，余下二十日由甲木主事；二月卯中先由甲木用事七日，再由乙木主事二十三日；如此类推，直到十二月丑中癸、庚、己轮流用事。通过这种分配，四时寒温——春暖、秋凉、冬寒、夏热——得以均衡展开，如同一个没有端点的环，周而复始地完成一年的岁功。

- **核心要点**：
  - 人元（司事之神）本质上是「月令内部的轮值气机」，用来细化月令之内在结构，而非另起一套体系。
  - 天元、地元、人元三层互相嵌套：干主禄位，支主形体，人元主事务，使得命局分析可以从职分、环境与实际事务三侧展开。
  - 工程实现时，可把「月令—人元」视为对月份的一种更高分辨率标注，将每月拆分为若干气段，从而支持更精细的时间建模（如流日、流旬分析）。

- **详细解说**：
  1) 推盘时，先确定出身月令及其人元轮值顺序，将整月划分为若干「气段」，大致对应文中 5 日、7 日、18 日、20 日、23 日等用事天数；
  2) 对接公历日期时，在历法模块中先换算至节气与建月，再按当月人元轮值表确定出生日落在何种人元气段，用以细化「得令」程度；
  3) 在命理分析中，将人元气段视为「月令内部的偏向」：同是寅月，落在甲木段者偏木、落在丙火段者偏火、落在艮土段者偏土，以此修正用神与格局判断；
  4) 在工程建模中，可将人元编码为「月内子标签」，与节气、真实气象数据一起参与时间特征构建，用于支持更细粒度的流年、流月、流日推演。

- 反例与边界：
  - 不宜将古籍列出的用事日数机械当作现代公历中的固定日期段，忽略节气漂移与历法差异；
  - 不能用人元一项推翻月令、节气与整体气候，仅可作为「微调」而非「主宰」；
  - 工程实现中若只依赖人元而忽视真实气象数据，会让模型停留在象数层面，失去与现实气候的对齐；
  - 反向误区是完全忽略人元，把整个月当作气机均质的区间，丢失古人关于「气机轮班」的精细观察。

- 小例（示意）：
  - 某甲木日主生于寅月，生日落在甲木用事段，系统可解释为「日元得月令正气」，与落在寅月艮土段的甲木相比，其木气更纯、依赖环境扶持稍弱；
  - 另一命局同为卯月生人，但生日落在卯中甲木段与乙木段不同，系统可将前者标记为「偏向开端与破土」、后者标记为「偏向延续与润饰」，以便在具体断事与推荐中做差异化处理。

- **叙事素材（narrative_snippets）**：
  - `[ns_smth_02_renyuan_001]` `[trigger: 三才分元]` `[factor_trigger: tianyuan_diyuan_renyuan AND sancai_jiagou]` `[role: 主干]` 天得之而轻清为阳，地得之而重浊为阴，人位乎天地之中，禀阳阴冲和之气。 → 《三命通会》卷二#人元三才
  - `[ns_smth_02_renyuan_002]` `[trigger: 司事之神]` `[factor_trigger: sishi_zhishen AND yueling_yongshi]` `[role: 主干依赖]` 支中所藏者主命，谓之人元，名为司事之神，以命术言之为月令。 → 《三命通会》卷二#人元三才
  - `[ns_smth_02_renyuan_003]` `[trigger: 月令用事]` `[factor_trigger: yueling_yongshi AND qiduan_huafen]` `[role: 条件分支]` 每月中不同五行在支内轮流主事若干天，以刻画气机轮班。 → 《三命通会》卷二#人元三才
  - `[ns_smth_02_renyuan_004]` `[trigger: 如环无端]` `[factor_trigger: ruhuanwuduan AND zhoueryuanshi]` `[role: 总结]` 如环无端，终而复始，岁功毕而成一年。 → 《三命通会》卷二#人元三才"""
    normalized_text_zh: str = """"""
    subject: str = "人元三才与月令分配"
    factor_refs: list = []
    
    # 叙事素材（包含 trigger_human）
    narrative_snippets: list = [

    ]
    
    # L2.5 因子关系
    related_semantics: list = [

    ]
    
    # L2.5 证据链
    evidence_refs: list = [

    ]
    
    metadata: SourceMetadata = SourceMetadata(
        book_id="sanming",
        chapter="",
        l1_anchor="smth_v1.0.0_人元三才与月令分配_001_L1",
    )
    version: str = "1.0.0"
