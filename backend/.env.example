# LucidSelf Backend Environment Variables
# Copy this file to .env and modify as needed

# ==================== Application ====================
APP_VERSION=1.0.0
DEBUG=false
LOG_LEVEL=INFO

# ==================== API ====================
# API host and port
API_HOST=0.0.0.0
API_PORT=8000

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Enable/disable features
ENABLE_AUTH=true
ENABLE_RATE_LIMIT=true

# ==================== Database ====================
# PostgreSQL
DATABASE_URL=postgresql://lucidself:password@localhost:5432/lucidself

# MongoDB
MONGODB_URL=mongodb://lucidself:password@localhost:27017/lucidself

# Redis
REDIS_URL=redis://:password@localhost:6379/0

# ==================== LLM 分层配置 ====================
# 中转站配置 (灵芽: https://api.lingyaai.cn/v1)
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://api.lingyaai.cn/v1

# Layer A: 解析层 (便宜模型 - 解析/拆解/分类)
# 用途: 解析用户输入、提取关键信息、生成结构化 JSON
# 推荐: gemini-2.5-flash (~1.7元/M)
LLM_LAYER_A_MODEL=gemini-2.5-flash
LLM_LAYER_A_FALLBACK=gemini-2.5-flash

# Layer B: 生成层 (核心模型 - doubao/grok/gemini)
# 用途: 生成命理解读、梦境分析、版本叙事

# 中文生成 - 命理/梦境解读
# 推荐: doubao-seed-1.6-thinking (~6.2元/M)
LLM_LAYER_B_CN_MODEL=doubao-seed-1.6-thinking
LLM_LAYER_B_CN_FALLBACK=gemini-2.5-flash

# 英文生成 - 占星/塔罗解读
# 推荐: gemini-2.5-flash (~6.5元/M), grok-4-fast-reasoning (~2.25元/M)
LLM_LAYER_B_EN_MODEL=gemini-2.5-flash
LLM_LAYER_B_EN_FALLBACK=grok-4-fast-reasoning

# 复杂推理 - 跨文化分析/深度解读
# 推荐: grok-4-fast-reasoning
LLM_LAYER_B_COMPLEX_MODEL=grok-4-fast-reasoning
LLM_LAYER_B_COMPLEX_FALLBACK=doubao-seed-1.6-thinking

# ==================== 成本控制 ====================
# 单用户每月 token 上限 (默认 50万)
LLM_MONTHLY_TOKEN_LIMIT=500000
# 单用户每月成本上限
LLM_MONTHLY_COST_LIMIT_CNY=3.0
LLM_MONTHLY_COST_LIMIT_USD=2.0

# ==================== Security ====================
# API Key for authentication
API_KEY=your_api_key_here

# JWT Secret (for future use)
JWT_SECRET=your_jwt_secret_here

# ==================== Rate Limiting ====================
# Requests per second
RATE_LIMIT_RATE=100.0
RATE_LIMIT_CAPACITY=200.0

# ==================== Observability ====================
# Prometheus metrics port
METRICS_PORT=9090

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=lucidself-backend

