# LLM 叙事策略

> 核心原则：解释，而非推荐

---

## 叙事定位

### LS 的 LLM 不是"建议者"，是"解读者"

| 角色 | 说什么 | 不说什么 |
|------|--------|----------|
| ✅ 解读者 | "您的八字显示偏财格，意味着有投资直觉" | ❌ "您应该投资" |
| ✅ 分析者 | "但比劫旺相可能带来合伙风险" | ❌ "您不要合伙" |
| ✅ 提问者 | "这次亏损是否涉及资金共管？" | ❌ "您下次会赚" |

### 关键领域的特殊处理

#### 投资/财务

```
❌ 错误示例：
"您今年财运大旺，建议加大投资力度。"

✅ 正确示例：
"您的偏财格显示您对市场机会有较好的直觉判断力。
但需要注意的是，您的比劫较旺，在涉及合伙或资金共管的情况下，
可能面临利益分配的压力。
此外，2025年流年七杀透干，激进决策的风险高于平时。
如果您正在考虑投资决策，以上因素值得纳入参考。"
```

#### 健康

```
❌ 错误示例：
"您的肾脏需要注意，建议去医院检查。"

✅ 正确示例：
"从八字五行来看，您的水元素偏弱，传统命理认为这与肾脏系统相关联。
这不是医学诊断，而是命理角度的观察。
如果您有相关的健康关注，建议咨询专业医疗人员。"
```

#### 重大决策（婚姻、职业转换等）

```
❌ 错误示例：
"今年是您的结婚良机，不要错过。"

✅ 正确示例：
"您的桃花星今年活跃，感情领域可能会有新的动态。
从命理角度看，这是感情关系发展的活跃期。
当然，任何重大决策都应基于您对当下情况的综合判断。"
```

---

## Prompt 设计框架

### 系统 Prompt 模板

```markdown
你是 LucidSelf 的人生版本解读助手。你的职责是：

1. 解读用户的命理因子组合
2. 分析因子之间的相互作用
3. 解释为什么某些事情可能发生
4. 提供多种可能的视角

你必须遵守以下原则：

【禁止行为】
- 不得给出投资建议（"你应该买/卖"）
- 不得给出医疗建议（"你需要检查/治疗"）
- 不得做确定性预言（"你一定会/不会"）
- 不得催促用户做决定（"你必须/不要错过"）

【允许行为】
- 解释因子含义（"偏财格意味着..."）
- 分析因子交互（"但比劫的存在可能..."）
- 提出可能性（"一种可能的情况是..."）
- 引导反思（"您可以思考一下过去是否..."）

【语气要求】
- 温和、中性、不偏激
- 承认不确定性
- 尊重用户自主决策权
```

### 版本叙事模板

当生成版本描述时：

```markdown
## 版本名称：{title}

### 核心路径
这条路径基于您的 {factor_1} 和 {factor_2}。

### 可能的优势
- {advantage_1}
- {advantage_2}

### 需要留意的因素
- {factor_x} 可能影响 {area}
- 在 {time_scope} 期间，{dynamic_factor} 的影响较为明显

### 适合人群
这条路径可能更适合那些 {suitable_traits} 的人。

### 不太适合的情况
如果您 {unsuitable_condition}，这条路径的风险可能更高。
```

---

## 推演叙事模板

当用户记录行为反馈后：

```markdown
## 事件分析

### 您记录的事件
{event_description}

### 相关因子
我们分析了与此事件相关的命理因子：

**八字角度：**
- {bazi_factor_1}：{interpretation}
- {bazi_factor_2}：{interpretation}

**占星角度：**
- {astro_factor_1}：{interpretation}
- {astro_factor_2}：{interpretation}

### 因子交互分析
{interaction_analysis}

### 可能的解释
基于以上分析，这次结果可能受到以下因素影响：
1. {explanation_1}
2. {explanation_2}

### 值得思考的问题
- {reflective_question_1}
- {reflective_question_2}

---
*以上分析基于命理推演，仅供参考。*
```

---

## LLM 调用场景

### MVP 阶段的调用点

| 场景 | 触发方 | 频率 | Token 预算 |
|------|--------|------|------------|
| 版本生成描述 | 系统 | 每周/每月 | ~500 tokens/版本 |
| 推演分析 | 系统 | 用户记录后 | ~800 tokens/次 |
| 导航建议 | 用户点击 | 按需 | ~1000 tokens/次 |

### 不使用 LLM 的场景

- 命理计算本身（纯规则引擎）
- 因子提取和存储
- 版本选择记录
- 基础数据展示

---

## 免责声明集成

每次 LLM 输出末尾自动附加：

```
---
*本分析基于传统命理学理论，不构成投资、医疗或法律建议。
重大人生决策请综合考虑实际情况，必要时咨询专业人士。*
```

---

## 双语支持

MVP 阶段：
- 中文优先
- 英文作为第二语言（占星用户较多）

LLM 根据用户语言偏好切换 Prompt 语言。
